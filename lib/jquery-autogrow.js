// Generated by CoffeeScript 1.3.1

(function($) {
  return $.fn.autoGrow = function(options) {
    options = $.extend({
      maxWidth: 1000,
      minWidth: 0,
      comfortZone: 70
    }, options);
    return this.each(function() {
      var check, input, maxWidth, minWidth, testSubject;
      maxWidth = options.maxWidth;
      minWidth = options.minWidth || $(this).width();
      input = $(this);
      testSubject = $('<pre/>').css({
        position: 'absolute',
        top: -9999,
        left: -9999,
        width: 'auto',
        fontFamily: input.css('fontFamily'),
        fontSize: input.css('fontSize'),
        fontWeight: input.css('fontWeight'),
        letterSpacing: input.css('letterSpacing'),
        whiteSpace: 'nowrap'
      });
      check = function() {
        var currentWidth, newWidth, testerWidth;
        testSubject.text(input.val());
        testerWidth = testSubject.width();
        newWidth = testerWidth + options.comfortZone;
        if (newWidth > maxWidth) {
          newWidth = maxWidth;
        }
        if (newWidth < minWidth) {
          newWidth = minWidth;
        }
        currentWidth = input.width();
        if (currentWidth !== newWidth) {
          return input.width(newWidth);
        }
      };
      testSubject.insertAfter(input);
      return $(this).bind('input', check);
    });
  };
})(typeof Zepto !== "undefined" && Zepto !== null ? Zepto : jQuery);
